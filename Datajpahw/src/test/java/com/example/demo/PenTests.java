package com.example.demo;

import java.util.ArrayList;
import java.util.List;
import javax.inject.Inject;
import org.junit.Ignore;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.domain.Page;
import org.springframework.test.context.junit4.SpringRunner;

import com.example.demo.domain.PageInfo;
import com.example.demo.domain.Pen;
import com.example.demo.service.PenService;

@RunWith(SpringRunner.class)
@SpringBootTest
public class PenTests {

	@Inject
	PenService penService;
	
	//分页
	@Test
	public void testPages() {
		Pen pen = new Pen();
		pen.setName("晨光");
		PageInfo page = new PageInfo();
		// 当前页
		page.setPage(1);
		// 页容量
		page.setLimit(10);
		// 排序字段名
		page.setSortName("id");
		Page<Pen> p = penService.search(pen, page);
		long total = p.getTotalElements();
		List<Pen> list = p.getContent();
		System.out.println("Number=" + total);
		for (Pen p1 : list) {
			System.out.println(p1);
		}
	}
	
	@Ignore
	@Test
	public void findById() {
		Pen pen = penService.findById();
		System.out.println(pen);
	}
	
	@Ignore
	@Test
	public void insertPen() {
		Pen pen = penService.insertPen("派克",5);
		System.out.println(pen);
	}
	
	@Ignore
	@Test
	public void findByNameMatch(String name){
		List<Pen> list = penService.findByNameMatch("英雄");
		for (Pen pen : list) {
			System.out.println(pen);
		}
	}
	
	@Ignore
	@Test
	public void deleteStormManageById(Integer id) {
		Integer i = penService.deleteStormManageById(1);
		if(i>0) {
			System.out.println("删除成功");
		}else {
			System.out.println("失败");
		}
	}
	
	@SuppressWarnings("unused")
	@Ignore
	@Test
	public void findAllByIds(List<Integer> ids){
		List<Integer> id = new ArrayList<>();
		ids.add(1);
		ids.add(2);
		ids.add(3);
		List<Pen> list = penService.findAllByIds(ids);
		for (Pen user : list) {
			System.out.println(user);
		}
	}
	
	@Ignore
	@Test
	public void updateById(String name,Integer id) {
		penService.updateById("得力", 3);
	}
	@Ignore
	@Test
	public void findByNameOrderByIdDesc(String name, Integer id){
		List<Pen> list = penService.findByNameOrderByIdDesc("米菲", 2);
		for (Pen pen : list) {
			System.out.println(pen);
		}
	}
	
}
